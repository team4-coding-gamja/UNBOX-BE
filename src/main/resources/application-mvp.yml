# AWS MVP 배포용 프로파일 설정
# EC2 + RDS 구성

spring:
  profiles:
    active: mvp
    
  # RDS PostgreSQL 연결
  datasource:
    driver-class-name: org.postgresql.Driver
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    
  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: update  # MVP용 데이터 유지
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        
  # Redis 설정
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:redis}
      port: ${SPRING_DATA_REDIS_PORT:6379}
      timeout: ${SPRING_DATA_REDIS_TIMEOUT:5000}
      lettuce:
        pool:
          max-active: ${SPRING_DATA_REDIS_LETTUCE_POOL_MAX_ACTIVE:8}
          max-idle: ${SPRING_DATA_REDIS_LETTUCE_POOL_MAX_IDLE:8}
          min-idle: ${SPRING_DATA_REDIS_LETTUCE_POOL_MIN_IDLE:0}

  # JWT 설정 (사용자 정의 프로퍼티)
  jwt:
    secret: ${SPRING_JWT_SECRET}
    # 사용자 정의 프로퍼티 (개발자가 코드에서 사용)
    access-token-expiration-ms: ${SPRING_JWT_ACCESS_TOKEN_EXPIRATION:3600000}
    refresh-token-expiration-ms: ${SPRING_JWT_REFRESH_TOKEN_EXPIRATION:604800000}

# 액추에이터 설정 (기본 모니터링)
management:
  endpoints:
    web:
      exposure:
        include: "health,info"  # 문자열로 설정
  endpoint:
    health:
      show-details: "when-authorized"  # 문자열로 설정

# 서버 설정
server:
  port: ${SERVER_PORT:8080}